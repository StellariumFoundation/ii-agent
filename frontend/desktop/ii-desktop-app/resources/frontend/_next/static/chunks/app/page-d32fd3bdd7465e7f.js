(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{9246:(e,t,s)=>{"use strict";s.d(t,{Bc:()=>l,ZI:()=>c,k$:()=>o,m_:()=>r});var a=s(95155);s(12115);var n=s(24560),i=s(29602);function l(e){let{delayDuration:t=0,...s}=e;return(0,a.jsx)(n.Kq,{"data-slot":"tooltip-provider",delayDuration:t,...s})}function r(e){let{...t}=e;return(0,a.jsx)(l,{children:(0,a.jsx)(n.bL,{"data-slot":"tooltip",...t})})}function o(e){let{...t}=e;return(0,a.jsx)(n.l9,{"data-slot":"tooltip-trigger",...t})}function c(e){let{className:t,sideOffset:s=0,children:l,...r}=e;return(0,a.jsx)(n.ZL,{children:(0,a.jsxs)(n.UC,{"data-slot":"tooltip-content",sideOffset:s,className:(0,i.cn)("max-w-[300px] max-h-[300px] overflow-auto bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit rounded-md px-3 py-1.5 text-xs text-balance",t),...r,children:[l,(0,a.jsx)(n.i3,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}},29602:(e,t,s)=>{"use strict";s.d(t,{cn:()=>i});var a=s(43463),n=s(69795);function i(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,n.QP)((0,a.$)(t))}},43654:(e,t,s)=>{Promise.resolve().then(s.bind(s,87617))},87617:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>e0});var a=s(95155),n=s(12115),i=s(24770),l=s(73032),r=s(25683),o=s(26808),c=s(40767),d=s(14505),u=s(86122),m=s(81024),p=s(96609),x=s(5565),h=s(30814),f=s(73875),v=s.n(f),g=s(70719),_=s.n(g),E=s(77711),b=s(60937),N=s.n(b),R=s(89208),S=s(13697),j=s(76046),w=s(13017),y=s(66889),O=s(21455),A=s.n(O),T=s(14707),I=s(31027),C=s(18537),k=s.n(C),W=s(29602);let B=(0,I.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-[color,box-shadow] disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40",outline:"border border-input bg-background shadow-xs hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function P(e){let{className:t,variant:s,size:n,asChild:i=!1,...l}=e,r=i?T.DX:"button";return(0,a.jsx)(r,{"data-slot":"button",className:(0,W.cn)(B({variant:s,size:n,className:t}),k().className),...l})}var L=s(30654),D=s.n(L),U=s(2818);let G=e=>{let{className:t,workspaceInfo:s}=e,[l,o]=(0,n.useState)(!1),[c,u]=(0,n.useState)([]),[m,p]=(0,n.useState)(!1),[h,f]=(0,n.useState)(null),[v,g]=(0,n.useState)(null),_=(0,j.useSearchParams)(),E=R.A.get("device_id")||"";(0,n.useEffect)(()=>{let e=_.get("id");e&&g(e)},[_]);let b=()=>{o(!l)},N=(0,n.useCallback)(async()=>{if(E){p(!0),f(null);try{let e=await fetch("".concat(U.env.NEXT_PUBLIC_API_URL,"/api/sessions/").concat(E));if(!e.ok)throw Error("Error fetching sessions: ".concat(e.statusText));let t=await e.json();u(t.sessions||[])}catch(e){console.error("Failed to fetch sessions:",e),f("Failed to load sessions. Please try again.")}finally{p(!1)}}},[E]),S=e=>{window.location.href="/?id=".concat(e)},O=e=>{try{return A()(e).format("MMM D, YYYY h:mm A")}catch(t){return e}};return(0,n.useEffect)(()=>{N()},[N]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(P,{variant:"ghost",size:"icon",onClick:b,className:(0,W.cn)("fixed top-4 left-4 z-50 bg-[#1e1f23] border border-[#3A3B3F] hover:bg-[#2a2b30] p-2",t),children:(0,a.jsx)(w.A,{className:"h-5 w-5 text-white"})}),(0,a.jsx)(r.N,{children:l&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.P.div,{initial:{opacity:0},animate:{opacity:.5},exit:{opacity:0},className:"fixed inset-0 bg-black z-60 cursor-pointer",onClick:b}),(0,a.jsxs)(i.P.div,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"spring",damping:25,stiffness:300},className:"fixed left-0 top-0 h-full w-[300px] bg-[#1e1f23] border-[#3A3B3F] z-100 overflow-auto",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-[#3A3B3F] flex items-center gap-3",children:[(0,a.jsx)("div",{className:"cursor-pointer flex items-center justify-center w-8 h-8 bg-[#2a2b30] rounded-md",onClick:b,children:(0,a.jsx)(w.A,{className:"h-5 w-5 text-white"})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(x.default,{src:"/logo-only.png",alt:"Logo",width:24,height:24,className:"rounded-sm"}),(0,a.jsx)("span",{className:"text-white text-lg font-serif ".concat(D().className),children:"II-Agent"})]})]}),(0,a.jsx)("div",{className:"p-2",children:m?(0,a.jsx)("div",{className:"flex justify-center py-4",children:(0,a.jsx)(d.A,{className:"h-6 w-6 text-white animate-spin"})}):h?(0,a.jsx)("div",{className:"text-red-400 text-sm p-2",children:h}):0===c.length?(0,a.jsx)("div",{className:"text-gray-400 text-sm p-2",children:"No sessions found"}):(0,a.jsx)("div",{className:"space-y-2",children:c.map(e=>(0,a.jsxs)("div",{onClick:()=>S(e.id),className:(0,W.cn)("p-2 rounded-md cursor-pointer hover:bg-[#2a2b30] transition-colors",v===e.id||(null==s?void 0:s.includes(e.id))?"bg-[#2a2b30] border border-[#3A3B3F]":""),children:[(0,a.jsx)("div",{className:"text-white text-sm font-medium truncate",children:e.first_message}),(0,a.jsxs)("div",{className:"text-gray-400 text-xs flex items-center gap-1 mt-1",children:[(0,a.jsx)(y.A,{className:"h-3 w-3"}),O(e.created_at)]})]},e.id))})})]})]})})]})};var z=s(27556),M=s(88553),F=s(9474),H=s(13287),K=s(95702),V=s(82533),X=s(5147),Y=s(38932);s(31491);let q=e=>{let{children:t}=e;return(0,a.jsx)("div",{className:"markdown-body",children:(0,a.jsx)(M.oz,{remarkPlugins:[F.A,K.A,H.A],rehypePlugins:[V.A,X.A,Y.A],components:{a:e=>{let{...t}=e;return(0,a.jsx)("a",{target:"_blank",rel:"noopener noreferrer",...t})}},children:t})})},J=e=>{let{className:t,url:s,screenshot:n,raw:i}=e;if(s)return(0,a.jsxs)("div",{className:"h-[calc(100vh-178px)] border border-[#3A3B3F] rounded-xl overflow-hidden shadow-sm ".concat(t),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 px-3 py-2.5 bg-black/80 border-b border-neutral-800",children:[(0,a.jsx)("div",{className:"flex items-center gap-1.5",children:(0,a.jsxs)("div",{className:"flex gap-1.5",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-[#ff5f57]"}),(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-[#febc2e]"}),(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-[#28c840]"})]})}),(0,a.jsx)("div",{className:"flex-1 flex items-center overflow-hidden",children:(0,a.jsxs)("div",{className:"bg-[#35363a] px-3 py-1.5 rounded-lg w-full flex items-center gap-2 group transition-colors",children:[(0,a.jsx)(u.A,{className:"h-3.5 w-3.5 text-white flex-shrink-0"}),(0,a.jsx)("span",{className:"text-sm text-white truncate flex-1 font-medium",children:s})]})}),(0,a.jsx)("div",{className:"flex items-center gap-1",children:(0,a.jsx)("button",{className:"p-1.5 rounded-md hover:bg-neutral-800 transition-colors",onClick:()=>window.open(s,"_blank"),children:(0,a.jsx)(z.A,{className:"h-4 w-4 text-white"})})})]}),(0,a.jsxs)("div",{className:"bg-black/80 h-full",children:[n&&(0,a.jsx)("img",{src:"data:image/jpeg;base64,".concat(n),alt:"Browser",className:"w-full h-full object-contain object-top"}),i&&(0,a.jsx)("div",{className:"p-4 overflow-auto h-[calc(100vh-234px)]",children:(0,a.jsx)(q,{children:i})})]})]})};var Q=s(70707),$=s(46967),Z=s(51719),ee=s(27257),et=s(86659),es=function(e){return e.BROWSER="browser",e.CODE="code",e.TERMINAL="terminal",e}({});let ea=["claude-3-7-sonnet@20250219","claude-sonnet-4@20250514","claude-opus-4@20250514"];var en=function(e){return e.USER_MESSAGE="user_message",e.CONNECTION_ESTABLISHED="connection_established",e.WORKSPACE_INFO="workspace_info",e.PROCESSING="processing",e.AGENT_THINKING="agent_thinking",e.TOOL_CALL="tool_call",e.TOOL_RESULT="tool_result",e.AGENT_RESPONSE="agent_response",e.STREAM_COMPLETE="stream_complete",e.ERROR="error",e.SYSTEM="system",e.PONG="pong",e.UPLOAD_SUCCESS="upload_success",e.BROWSER_USE="browser_use",e.FILE_EDIT="file_edit",e.PROMPT_GENERATED="prompt_generated",e}({}),ei=function(e){return e.SEQUENTIAL_THINKING="sequential_thinking",e.MESSAGE_USER="message_user",e.STR_REPLACE_EDITOR="str_replace_editor",e.BROWSER_USE="browser_use",e.PRESENTATION="presentation",e.WEB_SEARCH="web_search",e.IMAGE_SEARCH="image_search",e.VISIT="visit_webpage",e.BASH="bash",e.COMPLETE="complete",e.STATIC_DEPLOY="static_deploy",e.PDF_TEXT_EXTRACT="pdf_text_extract",e.AUDIO_TRANSCRIBE="audio_transcribe",e.GENERATE_AUDIO_RESPONSE="generate_audio_response",e.VIDEO_GENERATE="generate_video_from_text",e.IMAGE_GENERATE="generate_image_from_text",e.DEEP_RESEARCH="deep_research",e.LIST_HTML_LINKS="list_html_links",e.RETURN_CONTROL_TO_USER="return_control_to_user",e.BROWSER_VIEW="browser_view",e.BROWSER_NAVIGATION="browser_navigation",e.BROWSER_RESTART="browser_restart",e.BROWSER_WAIT="browser_wait",e.BROWSER_SCROLL_DOWN="browser_scroll_down",e.BROWSER_SCROLL_UP="browser_scroll_up",e.BROWSER_CLICK="browser_click",e.BROWSER_ENTER_TEXT="browser_enter_text",e.BROWSER_PRESS_KEY="browser_press_key",e.BROWSER_GET_SELECT_OPTIONS="browser_get_select_options",e.BROWSER_SELECT_DROPDOWN_OPTION="browser_select_dropdown_option",e.BROWSER_SWITCH_TAB="browser_switch_tab",e.BROWSER_OPEN_NEW_TAB="browser_open_new_tab",e}({});let el="ii-agent",er={ts:"typescript",tsx:"typescript",js:"javascript",jsx:"javascript",json:"json",md:"markdown",css:"css",scss:"scss",less:"less",html:"html",xml:"xml",yaml:"yaml",yml:"yaml",py:"python",rb:"ruby",php:"php",java:"java",cpp:"cpp",c:"c",cs:"csharp",go:"go",rs:"rust",swift:"swift",kt:"kotlin",sql:"sql",sh:"shell",bash:"shell",dockerfile:"dockerfile",vue:"vue",svelte:"svelte",graphql:"graphql",env:"plaintext"},eo=e=>{let{className:t,currentActionData:s,workspaceInfo:i,activeFile:l,setActiveFile:r,filesContent:o,isReplayMode:c,activeTab:d}=e,[u,m]=(0,n.useState)("plaintext"),[p,x]=(0,n.useState)(new Set),[h,f]=(0,n.useState)([]),v=(0,n.useRef)(null),g=(0,n.useRef)(null),[_,E]=(0,n.useState)(""),b=e=>{var t;let s=(null===(t=e.split(".").pop())||void 0===t?void 0:t.toLowerCase())||"";return"dockerfile"===e.toLowerCase()?er.dockerfile:er[s]||"plaintext"},N=async e=>{try{let t=await fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:e})});if(!t.ok)throw Error("Failed to load directory");let s=await t.json();f(s.files),x(new Set([e]))}catch(e){console.error("Error loading directory:",e)}},R=async e=>{try{let t=await fetch("/api/files/content",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:e})});if(!t.ok)throw Error("Failed to load file content");return(await t.json()).content}catch(e){return console.error("Error loading file:",e),""}};(0,n.useEffect)(()=>{i&&d===es.CODE&&N(i)},[s,i,d]);let S=e=>{x(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})};(0,n.useEffect)(()=>{(async()=>{if(l&&i){let e=l.startsWith(i)?l:"".concat(i,"/").concat(l);if(c){let t=(null==o?void 0:o[e])||"";m(b(e)),E(t);return}m(b(e)),E(await R(e))}})()},[l,i,o,s,c]);let j=e=>[...e].sort((e,t)=>e.type===t.type?e.name.toLowerCase().localeCompare(t.name.toLowerCase()):"folder"===e.type?-1:1).map(e=>{let t=e.path;if("folder"===e.type){let s=p.has(t);return(0,a.jsxs)("div",{children:[(0,a.jsxs)("button",{className:"flex items-center gap-2 w-full px-2 py-1 hover:bg-neutral-700 text-left text-sm",onClick:()=>S(t),children:[s?(0,a.jsx)(Z.A,{className:"h-4 w-4"}):(0,a.jsx)($.A,{className:"h-4 w-4"}),(0,a.jsx)(ee.A,{className:"h-4 w-4"}),e.name]}),s&&e.children&&(0,a.jsx)("div",{className:"ml-4",children:j(e.children)})]},t)}return(0,a.jsxs)("button",{className:"flex items-center gap-2 w-full px-2 py-1 hover:bg-neutral-700 text-left text-sm ".concat(l===t?"bg-neutral-700 text-white":"text-neutral-400"),onClick:()=>{null==r||r(t)},children:[(0,a.jsx)(et.A,{className:"h-4 w-4"}),e.name]},t)});return(0,a.jsx)("div",{className:"flex flex-col h-[calc(100vh-178px)] rounded-xl border border-[#3A3B3F] shadow-sm overflow-hidden ".concat(t),children:(0,a.jsxs)("div",{className:"flex flex-1 h-full",children:[(0,a.jsxs)("div",{className:"w-64 bg-neutral-900 border-r border-neutral-700 flex flex-col",children:[(0,a.jsx)("div",{className:"px-3 py-1 text-sm font-medium text-neutral-400 border-b border-neutral-700",children:el}),(0,a.jsx)("div",{className:"overflow-y-auto flex-1",children:j(h)})]}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col overflow-y-auto",children:[(()=>{if(!l||!i)return null;let e=l.replace(i,"").split("/").filter(Boolean),t=e[e.length-1];return(0,a.jsxs)("div",{className:"flex items-center gap-2 px-2 py-1 text-sm text-neutral-400 border-b border-neutral-700",children:[(0,a.jsx)("span",{className:"text-neutral-400",children:el}),(0,a.jsx)($.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-white",children:t})]})})(),(0,a.jsx)(Q.KE,{theme:"vs-dark",language:u,height:"100%",value:_,options:{minimap:{enabled:!1},scrollBeyondLastLine:!1,automaticLayout:!0,readOnly:!1},beforeMount:e=>{g.current=e},onMount:e=>{v.current=e}})]})]})})};var ec=s(15015),ed=s(85047),eu=s(11864);function em(e){let{className:t,...s}=e;return(0,a.jsx)("textarea",{"data-slot":"textarea",className:(0,W.cn)("border-input placeholder:text-muted-foreground dark:bg-neutral-800 focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...s})}var ep=s(14081),ex=s(48572),eh=s(21341),ef=s(2427);let ev=e=>{var t;let s=(null===(t=e.split(".").pop())||void 0===t?void 0:t.toLowerCase())||"",a=ep.A,n="bg-pink-500",i=s.toUpperCase();switch(s){case"xlsx":case"xls":case"csv":a=ex.A,n="bg-[#00A76F]",i="Spreadsheet";break;case"pdf":n="bg-pink-500",i="PDF";break;case"doc":case"docx":n="bg-blue-500",i="Word";break;case"ppt":case"pptx":a=eh.A,n="bg-orange-500",i="PowerPoint";break;case"jpg":case"jpeg":case"png":case"gif":case"bmp":case"webp":case"heic":case"svg":a=et.A,n="bg-purple-500",i="Image";break;case"mp3":case"wav":case"ogg":case"flac":case"m4a":case"aac":a=ef.A,n="bg-blue-600",i="Audio"}return{IconComponent:a,bgColor:n,label:i}};var eg=s(9246),e_=s(81556),eE=s(50135);function eb(e){let{className:t,...s}=e;return(0,a.jsx)(eE.bL,{"data-slot":"switch",className:(0,W.cn)("cursor-pointer peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-neutral-600 focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:(0,a.jsx)(eE.zi,{"data-slot":"switch-thumb",className:(0,W.cn)("cursor-pointer bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}var eN=s(24352);function eR(e){let{className:t,...s}=e;return(0,a.jsx)(eN.b,{"data-slot":"label",className:(0,W.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...s})}var eS=s(53592),ej=s(98867),ew=s(91902);function ey(e){let{...t}=e;return(0,a.jsx)(eS.bL,{"data-slot":"select",...t})}function eO(e){let{...t}=e;return(0,a.jsx)(eS.WT,{"data-slot":"select-value",...t})}function eA(e){let{className:t,size:s="default",children:n,...i}=e;return(0,a.jsxs)(eS.l9,{"data-slot":"select-trigger","data-size":s,className:(0,W.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...i,children:[n,(0,a.jsx)(eS.In,{asChild:!0,children:(0,a.jsx)(Z.A,{className:"size-4 opacity-50"})})]})}function eT(e){let{className:t,children:s,position:n="popper",...i}=e;return(0,a.jsx)(eS.ZL,{children:(0,a.jsxs)(eS.UC,{"data-slot":"select-content",className:(0,W.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...i,children:[(0,a.jsx)(eC,{}),(0,a.jsx)(eS.LM,{className:(0,W.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),(0,a.jsx)(ek,{})]})})}function eI(e){let{className:t,children:s,...n}=e;return(0,a.jsxs)(eS.q7,{"data-slot":"select-item",className:(0,W.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...n,children:[(0,a.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(eS.VF,{children:(0,a.jsx)(ej.A,{className:"size-4"})})}),(0,a.jsx)(eS.p4,{children:s})]})}function eC(e){let{className:t,...s}=e;return(0,a.jsx)(eS.PP,{"data-slot":"select-scroll-up-button",className:(0,W.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,a.jsx)(ew.A,{className:"size-4"})})}function ek(e){let{className:t,...s}=e;return(0,a.jsx)(eS.wn,{"data-slot":"select-scroll-down-button",className:(0,W.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,a.jsx)(Z.A,{className:"size-4"})})}let eW=e=>{let{isOpen:t,onClose:s,toolSettings:l,setToolSettings:r,selectedModel:o,setSelectedModel:d}=e,[u,m]=(0,n.useState)(!0);(0,n.useEffect)(()=>{o&&R.A.set("selected_model",o,{expires:365,sameSite:"strict",secure:"https:"===window.location.protocol})},[o]);let p=e=>{r({...l,[e]:!l[e]})};return(0,a.jsxs)(a.Fragment,{children:[t&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 z-40",onClick:s}),(0,a.jsx)(i.P.div,{className:"fixed top-0 right-0 h-full ".concat(t?"w-[400px]":"w-0"," bg-[#1e1f23] z-50 shadow-xl overflow-auto"),initial:{x:"100%"},animate:{x:t?0:"100%"},transition:{type:"spring",damping:30,stiffness:300},children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Run settings"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(eg.m_,{children:[(0,a.jsx)(eg.k$,{asChild:!0,children:(0,a.jsx)(P,{variant:"ghost",size:"icon",className:"rounded-full hover:bg-gray-700/50",onClick:()=>{r({deep_research:!1,pdf:!0,media_generation:!0,audio_generation:!0,browser:!0}),null==d||d(ea[0])},children:(0,a.jsx)(e_.A,{className:"size-5"})})}),(0,a.jsx)(eg.ZI,{children:"Reset Default Settings"})]}),(0,a.jsx)(P,{variant:"ghost",size:"icon",className:"rounded-full hover:bg-gray-700/50",onClick:s,children:(0,a.jsx)(c.A,{className:"size-5"})})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"space-y-2",children:(0,a.jsxs)(ey,{value:o,onValueChange:d,children:[(0,a.jsx)(eA,{className:"w-full bg-[#35363a] border-[#ffffff0f]",children:(0,a.jsx)(eO,{placeholder:"Select model"})}),(0,a.jsx)(eT,{className:"bg-[#35363a] border-[#ffffff0f]",children:ea.map(e=>(0,a.jsx)(eI,{value:e,children:e},e))})]})}),(0,a.jsxs)("div",{className:"space-y-4 pt-4 border-t border-gray-700",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center cursor-pointer",onClick:()=>m(!u),children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-white",children:"Tools"}),(0,a.jsx)(Z.A,{className:"size-5 transition-transform ".concat(u?"rotate-180":"")})]}),u&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(eR,{htmlFor:"deep-research",className:"text-gray-300",children:"Deep Research"}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:"Enable in-depth research capabilities"})]}),(0,a.jsx)(eb,{id:"deep-research",checked:l.deep_research,onCheckedChange:()=>p("deep_research")})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(eR,{htmlFor:"pdf",className:"text-gray-300",children:"PDF Processing"}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:"Extract and analyze PDF documents"})]}),(0,a.jsx)(eb,{id:"pdf",checked:l.pdf,onCheckedChange:()=>p("pdf")})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(eR,{htmlFor:"media-generation",className:"text-gray-300",children:"Media Generation"}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:"Generate images and videos"})]}),(0,a.jsx)(eb,{id:"media-generation",checked:l.media_generation,onCheckedChange:()=>p("media_generation")})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(eR,{htmlFor:"audio-generation",className:"text-gray-300",children:"Audio Generation"}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:"Generate and process audio content"})]}),(0,a.jsx)(eb,{id:"audio-generation",checked:l.audio_generation,onCheckedChange:()=>p("audio_generation")})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(eR,{htmlFor:"browser",className:"text-gray-300",children:"Browser"}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:"Enable web browsing capabilities"})]}),(0,a.jsx)(eb,{id:"browser",checked:l.browser,onCheckedChange:()=>p("browser")})]})]})]})]})]})})]})},eB=e=>{let{className:t,textareaClassName:s,placeholder:l,value:r,setValue:o,handleKeyDown:c,handleSubmit:u,handleFileUpload:m,isUploading:p=!1,isDisabled:h,isGeneratingPrompt:f=!1,handleEnhancePrompt:v,isLoading:g=!1,handleCancel:_,toolSettings:E,setToolSettings:b,selectedModel:N,setSelectedModel:R}=e,[S,j]=(0,n.useState)([]),[w,y]=(0,n.useState)(!1),O=(0,n.useRef)(null),[A,T]=(0,n.useState)({deep_research:!1,pdf:!0,media_generation:!0,audio_generation:!0,browser:!0});(0,n.useEffect)(()=>()=>{S.forEach(e=>{e.preview&&URL.revokeObjectURL(e.preview)})},[S]);let I=e=>{var t;return["jpg","jpeg","png","gif","webp","bmp","heic","svg"].includes((null===(t=e.split(".").pop())||void 0===t?void 0:t.toLowerCase())||"")};return(0,a.jsxs)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95,y:-10},transition:{type:"spring",stiffness:300,damping:30,mass:1},className:"w-full max-w-2xl z-50 ".concat(t),children:[(0,a.jsx)(eW,{isOpen:w,onClose:()=>y(!1),toolSettings:E||A,setToolSettings:b||T,selectedModel:N,setSelectedModel:R}),(0,a.jsxs)(i.P.div,{className:"relative rounded-xl",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1},children:[S.length>0&&(0,a.jsx)("div",{className:"absolute top-4 left-4 right-2 flex items-center overflow-auto gap-2 z-10",children:S.map(e=>{if(e.isImage&&e.preview)return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"w-20 h-20 rounded-xl overflow-hidden",children:(0,a.jsx)("img",{src:e.preview,alt:e.name,className:"w-full h-full object-cover"})}),e.loading&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30 rounded-xl",children:(0,a.jsx)(d.A,{className:"size-5 text-white animate-spin"})})]},e.name);let{IconComponent:t,bgColor:s,label:n}=ev(e.name);return(0,a.jsxs)("div",{className:"flex items-center gap-2 bg-neutral-900 text-white rounded-full px-3 py-2 border border-gray-700 shadow-sm",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-10 h-10 ".concat(s," rounded-full"),children:p?(0,a.jsx)(d.A,{className:"size-5 text-white animate-spin"}):(0,a.jsx)(t,{className:"size-5 text-white"})}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-sm font-medium truncate max-w-[200px]",children:e.name}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:n})]})]},e.name)})}),(0,a.jsx)(em,{className:"w-full p-4 pb-[72px] rounded-xl !text-lg focus:ring-0 resize-none !placeholder-gray-400 !bg-[#35363a] border-[#ffffff0f] shadow-[0px_0px_10px_0px_rgba(0,0,0,0.02)] ".concat(S.length>0?"pt-24 h-60":"h-50"," ").concat(s),placeholder:l||"Enter your research query or complex question for in-depth analysis...",value:r,onChange:e=>o(e.target.value),onKeyDown:e=>{if("Enter"===e.key){if(e.shiftKey){let e=O.current;if(e){let t=e.selectionStart;e.value.substring(t).includes("\n")||setTimeout(()=>{e&&(e.scrollTop=e.scrollHeight)},0)}}else c(e)}else c(e)},ref:O}),(0,a.jsxs)("div",{className:"flex justify-between items-center absolute bottom-0 py-4 m-px w-[calc(100%-4px)] rounded-b-xl bg-[#35363a]  px-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-x-3",children:[m&&(0,a.jsxs)("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[(0,a.jsx)(P,{variant:"ghost",size:"icon",className:"hover:bg-gray-700/50 size-10 rounded-full cursor-pointer border border-[#ffffff0f] shadow-sm",onClick:()=>{var e;return null===(e=document.getElementById("file-upload"))||void 0===e?void 0:e.click()},disabled:p||g,children:p?(0,a.jsx)(d.A,{className:"size-5 text-gray-400 animate-spin"}):(0,a.jsx)(ec.A,{className:"size-5 text-gray-400"})}),(0,a.jsx)("input",{id:"file-upload",type:"file",multiple:!0,className:"hidden",onChange:e=>{if(!e.target.files||!m)return;let t=Array.from(e.target.files).map(e=>{let t=I(e.name),s=t?URL.createObjectURL(e):void 0;return{name:e.name,loading:!0,isImage:t,preview:s}});j(e=>[...e,...t]),m(e),setTimeout(()=>{j(e=>e.map(e=>({...e,loading:!1})))},5e3)},disabled:p||g})]}),"function"==typeof R&&(0,a.jsxs)(eg.m_,{children:[(0,a.jsx)(eg.k$,{asChild:!0,children:(0,a.jsx)(P,{variant:"ghost",size:"icon",className:"hover:bg-gray-700/50 size-10 rounded-full cursor-pointer border border-[#ffffff0f] shadow-sm",onClick:()=>y(!0),disabled:g,children:(0,a.jsx)(ed.A,{className:"size-5 text-gray-400"})})}),(0,a.jsx)(eg.ZI,{children:"Settings"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,a.jsxs)(eg.m_,{children:[(0,a.jsx)(eg.k$,{asChild:!0,children:(0,a.jsx)(P,{variant:"ghost",size:"icon",className:"hover:bg-gray-700/50 size-10 rounded-full cursor-pointer border border-[#ffffff0f] shadow-sm",onClick:v,disabled:f,children:f?(0,a.jsx)(d.A,{className:"size-5 text-gray-400 animate-spin"}):(0,a.jsx)(x.default,{src:"/icons/AI.svg",alt:"Logo",width:24,height:24})})}),(0,a.jsx)(eg.ZI,{children:"Enhance Prompt"})]}),g&&_?(0,a.jsx)(P,{onClick:_,className:"cursor-pointer size-10 font-bold p-0 !bg-black rounded-full hover:scale-105 active:scale-95 transition-transform shadow-[0_4px_10px_rgba(0,0,0,0.2)]",children:(0,a.jsx)("div",{className:"size-3 rounded-xs bg-white"})}):(0,a.jsx)(P,{disabled:!r.trim()||h||g,onClick:()=>u(r),className:"cursor-pointer !border !border-red p-4 size-10 font-bold bg-gradient-skyblue-lavender rounded-full hover:scale-105 active:scale-95 transition-transform shadow-[0_4px_10px_rgba(0,0,0,0.2)]",children:(0,a.jsx)(eu.A,{className:"size-5"})})]})]})]})]},"input-view")};var eP=s(20853);let eL=e=>{let{className:t,keyword:s,search_results:n}=e;if(s)return(0,a.jsxs)("div",{className:"h-[calc(100vh-178px)] flex rounded-xl flex-col overflow-hidden border border-[#3A3B3F] ".concat(t),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 px-3 py-2.5 bg-black/80 backdrop-blur-xl border-b border-neutral-800",children:[(0,a.jsx)("div",{className:"flex items-center gap-1.5",children:(0,a.jsxs)("div",{className:"flex gap-1.5",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-[#ff5f57]"}),(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-[#febc2e]"}),(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-[#28c840]"})]})}),(0,a.jsx)("div",{className:"flex-1 flex items-center",children:(0,a.jsxs)("div",{className:"bg-[#35363a] px-3 py-1.5 rounded-lg w-full flex items-center gap-2 group transition-colors",children:[(0,a.jsx)(eP.A,{className:"h-3.5 w-3.5 text-white flex-shrink-0"}),(0,a.jsx)("span",{className:"text-sm text-white truncate font-medium",children:s})]})})]}),(0,a.jsx)("div",{className:"flex-1 bg-black/80 px-6 divide-y divide-y-neutral-200 overflow-auto",children:Array.isArray(n)&&(null==n?void 0:n.map((e,t)=>(0,a.jsxs)("div",{className:"flex flex-col gap-y-2 py-6 hover:bg-neutral-900 transition-colors",children:[(0,a.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"font-semibold text-blue-400 hover:underline text-lg",children:e.title}),(0,a.jsx)("p",{className:"text-neutral-400 text-sm line-clamp-2",children:e.content}),(0,a.jsx)("span",{className:"text-green-400 text-xs",children:e.url})]},t)))})]})};var eD=s(60872),eU=s(54216),eG=s(85160),ez=s(27554),eM=s(46165),eF=s(77696),eH=s(47820),eK=s(37541),eV=s(93573);let eX=e=>{var t;let{workspaceInfo:s,type:i,value:l,onClick:r}=e,o=(0,n.useRef)(!1);(0,n.useEffect)(()=>{o.current=!0},[]);let c=(0,n.useMemo)(()=>{let e="h-4 w-4 text-neutral-100 flex-shrink-0 mt-[2px]";switch(i){case ei.SEQUENTIAL_THINKING:case ei.MESSAGE_USER:return(0,a.jsx)(eG.A,{className:e});case ei.WEB_SEARCH:return(0,a.jsx)(eP.A,{className:e});case ei.IMAGE_SEARCH:return(0,a.jsx)(ez.A,{className:e});case ei.VISIT:case ei.BROWSER_USE:return(0,a.jsx)(u.A,{className:e});case ei.BASH:return(0,a.jsx)(p.A,{className:e});case ei.STR_REPLACE_EDITOR:return(0,a.jsx)(m.A,{className:e});case ei.STATIC_DEPLOY:return(0,a.jsx)(eM.A,{className:e});case ei.PDF_TEXT_EXTRACT:return(0,a.jsx)(ep.A,{className:e});case ei.AUDIO_TRANSCRIBE:return(0,a.jsx)(eF.A,{className:e});case ei.GENERATE_AUDIO_RESPONSE:return(0,a.jsx)(ef.A,{className:e});case ei.VIDEO_GENERATE:return(0,a.jsx)(eH.A,{className:e});case ei.IMAGE_GENERATE:return(0,a.jsx)(ez.A,{className:e});case ei.DEEP_RESEARCH:return(0,a.jsx)(eK.A,{className:e});case ei.PRESENTATION:return(0,a.jsx)(eh.A,{className:e});case ei.BROWSER_WAIT:return(0,a.jsx)(d.A,{className:e});case ei.BROWSER_VIEW:case ei.BROWSER_NAVIGATION:return(0,a.jsx)(u.A,{className:e});case ei.BROWSER_RESTART:return(0,a.jsx)(e_.A,{className:e});case ei.BROWSER_SCROLL_DOWN:return(0,a.jsx)(Z.A,{className:e});case ei.BROWSER_SCROLL_UP:return(0,a.jsx)(ew.A,{className:e});case ei.BROWSER_CLICK:return(0,a.jsx)(eV.A,{className:e});case ei.BROWSER_ENTER_TEXT:case ei.BROWSER_PRESS_KEY:case ei.BROWSER_GET_SELECT_OPTIONS:case ei.BROWSER_SELECT_DROPDOWN_OPTION:case ei.BROWSER_SWITCH_TAB:case ei.BROWSER_OPEN_NEW_TAB:return(0,a.jsx)(u.A,{className:e});default:return(0,a.jsx)(a.Fragment,{})}},[i]),x=(0,n.useMemo)(()=>{switch(i){case ei.SEQUENTIAL_THINKING:case ei.MESSAGE_USER:return"Thinking";case ei.WEB_SEARCH:return"Searching";case ei.IMAGE_SEARCH:return"Searching for Images";case ei.VISIT:case ei.BROWSER_USE:return"Browsing";case ei.BASH:return"Executing Command";case ei.STR_REPLACE_EDITOR:var e,t;return(null==l?void 0:null===(e=l.tool_input)||void 0===e?void 0:e.command)==="create"?"Creating File":(null==l?void 0:null===(t=l.tool_input)||void 0===t?void 0:t.command)==="view"?"Viewing File":"Editing File";case ei.STATIC_DEPLOY:return"Deploying";case ei.PDF_TEXT_EXTRACT:return"Extracting Text";case ei.AUDIO_TRANSCRIBE:return"Transcribing Audio";case ei.GENERATE_AUDIO_RESPONSE:return"Generating Audio";case ei.VIDEO_GENERATE:return"Generating Video";case ei.IMAGE_GENERATE:return"Generating Image";case ei.DEEP_RESEARCH:return"Deep Researching";case ei.PRESENTATION:return"Using presentation agent";case ei.BROWSER_WAIT:return"Waiting for Page to Load";case ei.BROWSER_VIEW:return"Viewing Page";case ei.BROWSER_NAVIGATION:return"Navigating to URL";case ei.BROWSER_RESTART:return"Restarting Browser";case ei.BROWSER_SCROLL_DOWN:return"Scrolling Down";case ei.BROWSER_SCROLL_UP:return"Scrolling Up";case ei.BROWSER_CLICK:return"Clicking Element";case ei.BROWSER_ENTER_TEXT:return"Entering Text";case ei.BROWSER_PRESS_KEY:return"Pressing Key";case ei.BROWSER_GET_SELECT_OPTIONS:return"Getting Select Options";case ei.BROWSER_SELECT_DROPDOWN_OPTION:return"Selecting Dropdown Option";case ei.BROWSER_SWITCH_TAB:return"Switching Tab";case ei.BROWSER_OPEN_NEW_TAB:return"Opening New Tab";default:return i}},[i,null==l?void 0:null===(t=l.tool_input)||void 0===t?void 0:t.command]),h=(0,n.useMemo)(()=>{var e,t,a,n,r,o,c,d,u,m,p,x,h,f,v,g,_,E,b,N,R,S,j,w,y,O,A,T,I,C,k,W,B,P,L,D,U,G,z,M,F,H,K;switch(i){case ei.SEQUENTIAL_THINKING:case ei.MESSAGE_USER:return null===(e=l.tool_input)||void 0===e?void 0:e.thought;case ei.WEB_SEARCH:return null===(t=l.tool_input)||void 0===t?void 0:t.query;case ei.IMAGE_SEARCH:return null===(a=l.tool_input)||void 0===a?void 0:a.query;case ei.VISIT:return null===(n=l.tool_input)||void 0===n?void 0:n.url;case ei.BROWSER_USE:return null===(r=l.tool_input)||void 0===r?void 0:r.url;case ei.BASH:return null===(o=l.tool_input)||void 0===o?void 0:o.command;case ei.STR_REPLACE_EDITOR:return(null===(c=l.tool_input)||void 0===c?void 0:c.path)===s?s:null===(u=l.tool_input)||void 0===u?void 0:null===(d=u.path)||void 0===d?void 0:d.replace(s,"");case ei.STATIC_DEPLOY:return(null===(m=l.tool_input)||void 0===m?void 0:m.file_path)===s?s:null===(x=l.tool_input)||void 0===x?void 0:null===(p=x.file_path)||void 0===p?void 0:p.replace(s,"");case ei.PDF_TEXT_EXTRACT:return(null===(h=l.tool_input)||void 0===h?void 0:h.file_path)===s?s:null===(v=l.tool_input)||void 0===v?void 0:null===(f=v.file_path)||void 0===f?void 0:f.replace(s,"");case ei.AUDIO_TRANSCRIBE:return(null===(g=l.tool_input)||void 0===g?void 0:g.file_path)===s?s:null===(E=l.tool_input)||void 0===E?void 0:null===(_=E.file_path)||void 0===_?void 0:_.replace(s,"");case ei.GENERATE_AUDIO_RESPONSE:return(null===(b=l.tool_input)||void 0===b?void 0:b.output_filename)===s?s:null===(R=l.tool_input)||void 0===R?void 0:null===(N=R.output_filename)||void 0===N?void 0:N.replace(s,"");case ei.VIDEO_GENERATE:return(null===(S=l.tool_input)||void 0===S?void 0:S.output_filename)===s?s:null===(w=l.tool_input)||void 0===w?void 0:null===(j=w.output_filename)||void 0===j?void 0:j.replace(s,"");case ei.IMAGE_GENERATE:return(null===(y=l.tool_input)||void 0===y?void 0:y.output_filename)===s?s:null===(A=l.tool_input)||void 0===A?void 0:null===(O=A.output_filename)||void 0===O?void 0:O.replace(s,"");case ei.DEEP_RESEARCH:return null===(T=l.tool_input)||void 0===T?void 0:T.query;case ei.PRESENTATION:return(null===(I=l.tool_input)||void 0===I?void 0:I.action)+": "+(null===(C=l.tool_input)||void 0===C?void 0:C.description);case ei.BROWSER_WAIT:return null===(k=l.tool_input)||void 0===k?void 0:k.url;case ei.BROWSER_VIEW:return null===(W=l.tool_input)||void 0===W?void 0:W.url;case ei.BROWSER_NAVIGATION:return null===(B=l.tool_input)||void 0===B?void 0:B.url;case ei.BROWSER_RESTART:return null===(P=l.tool_input)||void 0===P?void 0:P.url;case ei.BROWSER_SCROLL_DOWN:return null===(L=l.tool_input)||void 0===L?void 0:L.url;case ei.BROWSER_SCROLL_UP:return null===(D=l.tool_input)||void 0===D?void 0:D.url;case ei.BROWSER_CLICK:return null===(U=l.tool_input)||void 0===U?void 0:U.url;case ei.BROWSER_ENTER_TEXT:return null===(G=l.tool_input)||void 0===G?void 0:G.text;case ei.BROWSER_PRESS_KEY:return null===(z=l.tool_input)||void 0===z?void 0:z.key;case ei.BROWSER_GET_SELECT_OPTIONS:return null===(M=l.tool_input)||void 0===M?void 0:M.url;case ei.BROWSER_SELECT_DROPDOWN_OPTION:return null===(F=l.tool_input)||void 0===F?void 0:F.url;case ei.BROWSER_SWITCH_TAB:return null===(H=l.tool_input)||void 0===H?void 0:H.url;case ei.BROWSER_OPEN_NEW_TAB:return null===(K=l.tool_input)||void 0===K?void 0:K.url}},[i,l,s]);return i===ei.COMPLETE||i===ei.BROWSER_VIEW||i===ei.LIST_HTML_LINKS||i===ei.RETURN_CONTROL_TO_USER?null:(0,a.jsxs)("div",{onClick:r,className:"group cursor-pointer flex items-start gap-2 px-3 py-2 bg-[#35363a] rounded-xl backdrop-blur-sm \n      shadow-sm\n      transition-all duration-200 ease-out\n      hover:bg-neutral-800\n      hover:border-neutral-700\n      hover:shadow-[0_2px_8px_rgba(0,0,0,0.24)]\n      active:scale-[0.98] overflow-hidden\n      ".concat(o.current?"animate-none":"animate-fadeIn"),children:[c,(0,a.jsxs)("div",{className:"flex flex-col gap-1.5 text-sm",children:[(0,a.jsx)("span",{className:"text-neutral-100 font-medium group-hover:text-white",children:x}),(0,a.jsx)("span",{className:"text-neutral-400 font-medium truncate group-hover:text-neutral-300",children:h})]})]})},eY=e=>{let{className:t,textareaClassName:s,editingMessage:l,handleCancel:r,handleEditMessage:o}=e,[c,d]=(0,n.useState)("");return(0,n.useEffect)(()=>{d(l)},[l]),(0,a.jsx)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95,y:-10},transition:{type:"spring",stiffness:300,damping:30,mass:1},className:"w-full max-w-2xl z-50 ".concat(t),children:(0,a.jsxs)(i.P.div,{className:"relative rounded-xl",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1},children:[(0,a.jsx)(em,{className:"w-full p-0 pb-[72px] rounded-xl !text-lg focus-visible:ring-0 resize-none !placeholder-gray-400 !bg-[#35363a] border-none h-50 ".concat(s),placeholder:"Ask me anything...",value:c,onChange:e=>d(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),o(c))}}),(0,a.jsx)("div",{className:"flex justify-end items-center absolute bottom-0 m-px w-[calc(100%-4px)] rounded-b-xl bg-[#35363a]",children:(0,a.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,a.jsx)(P,{onClick:r,className:"cursor-pointer h-10 bg-transparent text-white hover:bg-transparent border border-[#ffffff0f] hover:scale-105 active:scale-95 transition-transform",children:"Cancel"}),(0,a.jsx)(P,{disabled:!c.trim(),onClick:()=>o(c),className:"cursor-pointer !border !border-red p-4 size-10 font-bold bg-gradient-skyblue-lavender rounded-full hover:scale-105 active:scale-95 transition-transform shadow-[0_4px_10px_rgba(0,0,0,0.2)]",children:(0,a.jsx)(eu.A,{className:"size-5"})})]})})]})},"input-view")},eq=e=>{let{messages:t,isLoading:s,isCompleted:n,isStopped:l,workspaceInfo:r,isUploading:o,currentQuestion:c,messagesEndRef:d,isReplayMode:u,handleClickAction:m,setCurrentQuestion:p,handleKeyDown:x,handleQuestionSubmit:h,handleFileUpload:f,isGeneratingPrompt:v,handleEnhancePrompt:g,handleCancel:_,editingMessage:E,setEditingMessage:b,handleEditMessage:N}=e,R=(e,t)=>{let s=t.filter(e=>"user"===e.role);return s.length>0&&s[s.length-1].id===e.id};return(0,a.jsxs)("div",{className:"col-span-4",children:[(0,a.jsxs)(i.P.div,{className:"p-4 pt-0 w-full h-full max-h-[calc(100vh-230px)] overflow-y-auto relative",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2,duration:.3},children:[t.map((e,s)=>(0,a.jsxs)(i.P.div,{className:"mb-4 ".concat("user"===e.role?"text-right mb-8":"text-left"),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*s,duration:.3},children:[e.files&&e.files.length>0&&(0,a.jsx)("div",{className:"flex flex-col gap-2 mb-2",children:e.files.map((t,s)=>{if(null!==t.match(/\.(jpeg|jpg|gif|png|webp|svg|heic|bmp)$/i)&&e.fileContents&&e.fileContents[t])return(0,a.jsx)("div",{className:"inline-block ml-auto rounded-3xl overflow-hidden max-w-[320px]",children:(0,a.jsx)("div",{className:"w-40 h-40 rounded-xl overflow-hidden",children:(0,a.jsx)("img",{src:e.fileContents[t],alt:t,className:"w-full h-full object-cover"})})},"".concat(e.id,"-file-").concat(s));let{IconComponent:n,bgColor:i,label:l}=ev(t);return(0,a.jsx)("div",{className:"inline-block ml-auto bg-[#35363a] text-white rounded-2xl px-4 py-3 border border-gray-700 shadow-sm",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-12 h-12 ".concat(i," rounded-xl"),children:(0,a.jsx)(n,{className:"size-6 text-white"})}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-base font-medium",children:t}),(0,a.jsx)("span",{className:"text-left text-sm text-gray-500",children:l})]})]})},"".concat(e.id,"-file-").concat(s))})}),e.content&&(0,a.jsx)(i.P.div,{className:"inline-block text-left rounded-lg ".concat("user"===e.role?"bg-[#35363a] p-3 max-w-[80%] text-white border border-[#3A3B3F] shadow-sm whitespace-pre-wrap":"text-white"," ").concat((null==E?void 0:E.id)===e.id?"w-full max-w-none":""),initial:{scale:.9},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:30},children:"user"===e.role?(0,a.jsx)("div",{children:(null==E?void 0:E.id)===e.id?(0,a.jsx)(eY,{editingMessage:e.content,handleCancel:()=>b(void 0),handleEditMessage:N}):(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("div",{className:"text-left",children:e.content}),R(e,t)&&!u&&(0,a.jsx)("div",{className:"absolute -bottom-[45px] -right-[20px] opacity-0 group-hover:opacity-100 transition-opacity",children:(0,a.jsx)(P,{variant:"ghost",size:"icon",className:"text-xs cursor-pointer hover:!bg-transparent",onClick:()=>{b(e)},children:(0,a.jsx)(eD.A,{className:"size-3 mr-1"})})})]})}):(0,a.jsx)(q,{children:e.content})}),e.action&&(0,a.jsx)(i.P.div,{className:"mt-2",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*s,duration:.3},children:(0,a.jsx)(eX,{workspaceInfo:r,type:e.action.type,value:e.action.data,onClick:()=>m(e.action,!0)})})]},e.id)),s&&(0,a.jsx)(i.P.div,{className:"mb-4 text-left",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{type:"spring",stiffness:300,damping:30},children:(0,a.jsx)(i.P.div,{className:"inline-block p-3 text-left rounded-lg bg-neutral-800/90 text-white backdrop-blur-sm",initial:{scale:.95},animate:{scale:1},transition:{type:"spring",stiffness:400,damping:25},children:(0,a.jsx)("div",{className:"flex items-center gap-3",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-white rounded-full animate-[dot-bounce_1.2s_ease-in-out_infinite_0ms]"}),(0,a.jsx)("div",{className:"w-2 h-2 bg-white rounded-full animate-[dot-bounce_1.2s_ease-in-out_infinite_200ms]"}),(0,a.jsx)("div",{className:"w-2 h-2 bg-white rounded-full animate-[dot-bounce_1.2s_ease-in-out_infinite_400ms]"})]})})})}),n&&(0,a.jsxs)("div",{className:"flex gap-x-2 items-center bg-[#25BA3B1E] text-green-600 text-sm p-2 rounded-full",children:[(0,a.jsx)(ej.A,{className:"size-4"}),(0,a.jsx)("span",{children:"II-Agent has completed the current task."})]}),l&&(0,a.jsxs)("div",{className:"flex gap-x-2 items-center bg-[#ffbf361f] text-yellow-300 text-sm p-2 rounded-full",children:[(0,a.jsx)(eU.A,{className:"size-4"}),(0,a.jsx)("span",{children:"II-Agent has stopped, send a new message to continue."})]}),(0,a.jsx)("div",{ref:d})]}),(0,a.jsx)(i.P.div,{className:"sticky bottom-0 left-0 w-full",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2,duration:.3},children:(0,a.jsx)(eB,{className:"p-4 pb-0 w-full max-w-none",textareaClassName:"h-30 w-full",placeholder:"Ask me anything...",value:c,setValue:p,handleKeyDown:x,handleSubmit:h,handleFileUpload:f,isUploading:o,isGeneratingPrompt:v,handleEnhancePrompt:g,isLoading:s,handleCancel:_})})]})},eJ=e=>{let{className:t,url:s,image:n}=e;if(s)return(0,a.jsxs)("div",{className:"h-[calc(100vh-178px)] border border-[#3A3B3F] rounded-xl overflow-hidden shadow-sm ".concat(t),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 px-3 py-2.5 bg-black/80 border-b border-neutral-800",children:[(0,a.jsx)("div",{className:"flex items-center gap-1.5",children:(0,a.jsxs)("div",{className:"flex gap-1.5",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-[#ff5f57]"}),(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-[#febc2e]"}),(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-[#28c840]"})]})}),(0,a.jsx)("div",{className:"flex-1 flex items-center overflow-hidden",children:(0,a.jsxs)("div",{className:"bg-[#35363a] px-3 py-1.5 rounded-lg w-full flex items-center gap-2 group transition-colors",children:[(0,a.jsx)(u.A,{className:"h-3.5 w-3.5 text-white flex-shrink-0"}),(0,a.jsx)("span",{className:"text-sm text-white truncate flex-1 font-medium",children:s})]})}),(0,a.jsx)("div",{className:"flex items-center gap-1",children:(0,a.jsx)("button",{className:"p-1.5 rounded-md hover:bg-neutral-800 transition-colors",onClick:()=>window.open(s,"_blank"),children:(0,a.jsx)(z.A,{className:"h-4 w-4 text-white"})})})]}),(0,a.jsx)("div",{className:"bg-black/80 h-full",children:n&&(0,a.jsx)("img",{src:n,alt:"Browser",className:"w-full h-full object-contain object-center"})})]})};var eQ=s(2818);let e$=(0,E.default)(()=>Promise.all([s.e(450),s.e(81),s.e(976)]).then(s.bind(s,54976)),{loadableGenerated:{webpack:()=>[54976]},ssr:!1});function eZ(){var e,t,s,f,g,E,b,w;let y=(0,n.useRef)(null),O=(0,n.useRef)(null),A=(0,j.useSearchParams)(),T=(0,j.useRouter)(),[I,C]=(0,n.useState)([]),[k,W]=(0,n.useState)(!1),[B,L]=(0,n.useState)(null),[D,U]=(0,n.useState)(es.BROWSER),[z,M]=(0,n.useState)(),[F,H]=(0,n.useState)(""),[K,V]=(0,n.useState)(""),[X,Y]=(0,n.useState)(!1),[q,Q]=(0,n.useState)(!1),[$,Z]=(0,n.useState)(""),[ee,et]=(0,n.useState)(!1),[el,er]=(0,n.useState)([]),[ec,ed]=(0,n.useState)(""),[eu,em]=(0,n.useState)(null),[ep,ex]=(0,n.useState)(!1),[eh,ef]=(0,n.useState)({}),[ev,eg]=(0,n.useState)(""),[e_,eE]=(0,n.useState)(!1),[eb,eN]=(0,n.useState)(),[eR,eS]=(0,n.useState)({deep_research:!1,pdf:!0,media_generation:!0,audio_generation:!0,browser:!0}),[ej,ew]=(0,n.useState)(),ey=(0,n.useMemo)(()=>!!A.get("id"),[A]);(0,n.useEffect)(()=>{em(A.get("id"))},[A]),(0,n.useEffect)(()=>{(async()=>{let e=A.get("id");if(e){ex(!0);try{var t,s;let a=await fetch("".concat(eQ.env.NEXT_PUBLIC_API_URL,"/api/sessions/").concat(e,"/events"));if(!a.ok)throw Error("Error fetching session events: ".concat(a.statusText));let n=await a.json();if(Z(null===(s=n.events)||void 0===s?void 0:null===(t=s[0])||void 0===t?void 0:t.workspace_dir),n.events&&Array.isArray(n.events)){let e=[];(async()=>{W(!0);for(let e=0;e<n.events.length;e++){let t=n.events[e];await new Promise(e=>setTimeout(e,50)),ek({...t.event_payload,id:t.id})}W(!1)})(),e.length>0&&(C(e),Y(!0));let t=n.events.find(e=>e.event_type===en.WORKSPACE_INFO);t&&t.event_payload.path&&Z(t.event_payload.path)}}catch(e){console.error("Failed to fetch session events:",e),h.oR.error("Failed to load session history")}finally{ex(!1)}}})()},[A]),(0,n.useEffect)(()=>{let e=R.A.get("device_id");e?console.log("Using existing device ID:",e):(e=(0,S.A)(),R.A.set("device_id",e,{expires:365,sameSite:"strict",secure:"https:"===window.location.protocol}),console.log("Generated new device ID:",e)),ed(e)},[]),(0,n.useEffect)(()=>{let e=R.A.get("selected_model");e&&ea.includes(e)?ew(e):ew(ea[0])},[]);let eO=()=>{if(!B||B.readyState!==WebSocket.OPEN){h.oR.error("WebSocket connection is not open. Please try again.");return}eE(!0),B.send(JSON.stringify({type:"enhance_prompt",content:{model_name:ej,text:K,files:null==el?void 0:el.map(e=>".".concat(e))}}))},eA=_()(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e)switch(e.type){case ei.WEB_SEARCH:case ei.IMAGE_GENERATE:case ei.BROWSER_USE:case ei.VISIT:case ei.BROWSER_CLICK:case ei.BROWSER_ENTER_TEXT:case ei.BROWSER_PRESS_KEY:case ei.BROWSER_GET_SELECT_OPTIONS:case ei.BROWSER_SELECT_DROPDOWN_OPTION:case ei.BROWSER_SWITCH_TAB:case ei.BROWSER_OPEN_NEW_TAB:case ei.BROWSER_VIEW:case ei.BROWSER_NAVIGATION:case ei.BROWSER_RESTART:case ei.BROWSER_WAIT:case ei.BROWSER_SCROLL_DOWN:case ei.BROWSER_SCROLL_UP:U(es.BROWSER),M(e);break;case ei.BASH:U(es.TERMINAL),t||setTimeout(()=>{var t,s,a,n;(null===(t=e.data)||void 0===t?void 0:t.isResult)||null===(a=y.current)||void 0===a||a.writeln("".concat((null===(s=e.data.tool_input)||void 0===s?void 0:s.command)||"")),e.data.result&&("".concat(e.data.result||"").split("\n").forEach(e=>{var t;null===(t=y.current)||void 0===t||t.writeln(e)}),null===(n=y.current)||void 0===n||n.write("$ "))},500);break;case ei.STR_REPLACE_EDITOR:var s,a;U(es.CODE),M(e);let n=(null===(s=e.data.tool_input)||void 0===s?void 0:s.path)||(null===(a=e.data.tool_input)||void 0===a?void 0:a.file);n&&H(n.startsWith($)?n:"".concat($,"/").concat(n))}},50),eT=async e=>{if(!e.trim()||k)return;if(W(!0),V(""),Y(!1),Q(!1),!eu){let e="".concat($).split("/").pop();e&&em(e)}let t={id:Date.now().toString(),role:"user",content:e,timestamp:Date.now()};if(C(e=>[...e,t]),!B||B.readyState!==WebSocket.OPEN){h.oR.error("WebSocket connection is not open. Please try again."),W(!1);return}eu||B.send(JSON.stringify({type:"init_agent",content:{model_name:ej,tool_args:eR}})),B.send(JSON.stringify({type:"query",content:{text:e,resume:I.length>0,files:null==el?void 0:el.map(e=>".".concat(e))}}))},eI=e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),eT(e.target.value))},eC=async e=>{if(!e.target.files||0===e.target.files.length)return;let t=Array.from(e.target.files),s={};t.forEach(e=>{s[e.name]=!1}),et(!0);let a={},n=($||"").split("/").pop(),i={id:Date.now().toString(),role:"user",files:t.map(e=>e.name),fileContents:a,timestamp:Date.now()};C(e=>[...e,i]);let l=t.map(async e=>new Promise(async t=>{try{let s=new FileReader;s.onload=async s=>{var i;let l=null===(i=s.target)||void 0===i?void 0:i.result;a[e.name]=l;let r=await fetch("".concat(eQ.env.NEXT_PUBLIC_API_URL,"/api/upload"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:n,file:{path:e.name,content:l}})}),o=await r.json();r.ok?(er(e=>[...e,o.file.path]),t({name:e.name,success:!0})):(console.error("Error uploading ".concat(e.name,":"),o.error),t({name:e.name,success:!1}))},s.onerror=()=>{t({name:e.name,success:!1})},s.readAsDataURL(e)}catch(s){console.error("Error processing ".concat(e.name,":"),s),t({name:e.name,success:!1})}}));try{let e=(await Promise.all(l)).filter(e=>!e.success);e.length>0&&h.oR.error("Failed to upload ".concat(e.length," file(s)")),C(e=>{let t=[...e],s=t.findIndex(e=>e.id===i.id);return s>=0&&(t[s]={...t[s],fileContents:a}),t})}catch(e){console.error("Error uploading files:",e),h.oR.error("Error uploading files")}finally{et(!1),e.target.value=""}},ek=e=>{switch(e.type){case en.USER_MESSAGE:C(t=>[...t,{id:e.id,role:"user",content:e.content.text,timestamp:Date.now()}]);break;case en.PROMPT_GENERATED:eE(!1),V(e.content.result);break;case en.PROCESSING:W(!0);break;case en.WORKSPACE_INFO:Z(e.content.path);break;case en.AGENT_THINKING:C(t=>[...t,{id:e.id,role:"assistant",content:e.content.text,timestamp:Date.now()}]);break;case en.TOOL_CALL:if(e.content.tool_name===ei.SEQUENTIAL_THINKING)C(t=>[...t,{id:e.id,role:"assistant",content:e.content.tool_input.thought,timestamp:Date.now()}]);else if(e.content.tool_name===ei.MESSAGE_USER)C(t=>[...t,{id:e.id,role:"assistant",content:e.content.tool_input.text,timestamp:Date.now()}]);else{var t;let s={id:e.id,role:"assistant",action:{type:e.content.tool_name,data:e.content},timestamp:Date.now()},a=null===(t=e.content.tool_input)||void 0===t?void 0:t.url;a&&eg(a),C(e=>[...e,s]),eA(s.action)}break;case en.FILE_EDIT:C(t=>{let s=v()(t[t.length-1]);if(s.action&&s.action.type===ei.STR_REPLACE_EDITOR){var a;s.action.data.content=e.content.content,s.action.data.path=e.content.path;let t=(null===(a=e.content.path)||void 0===a?void 0:a.includes($))?e.content.path:"".concat($,"/").concat(e.content.path);ef(s=>({...s,[t]:e.content.content}))}return setTimeout(()=>{eA(s.action)},500),[...t.slice(0,-1),s]});break;case en.BROWSER_USE:break;case en.TOOL_RESULT:e.content.tool_name===ei.BROWSER_USE?C(t=>[...t,{id:e.id,role:"assistant",content:e.content.result,timestamp:Date.now()}]):e.content.tool_name!==ei.SEQUENTIAL_THINKING&&e.content.tool_name!==ei.PRESENTATION&&e.content.tool_name!==ei.MESSAGE_USER&&C(t=>{var s,a,n;let i=v()(t[t.length-1]);return(null==i?void 0:i.action)&&(null===(s=i.action)||void 0===s?void 0:s.type)===e.content.tool_name?(i.action.data.result="".concat(e.content.result),[ei.BROWSER_VIEW,ei.BROWSER_CLICK,ei.BROWSER_ENTER_TEXT,ei.BROWSER_PRESS_KEY,ei.BROWSER_GET_SELECT_OPTIONS,ei.BROWSER_SELECT_DROPDOWN_OPTION,ei.BROWSER_SWITCH_TAB,ei.BROWSER_OPEN_NEW_TAB,ei.BROWSER_WAIT,ei.BROWSER_SCROLL_DOWN,ei.BROWSER_SCROLL_UP,ei.BROWSER_NAVIGATION,ei.BROWSER_RESTART].includes(e.content.tool_name)&&(i.action.data.result=e.content.result&&Array.isArray(e.content.result)?null===(n=e.content.result.find(e=>"image"===e.type))||void 0===n?void 0:null===(a=n.source)||void 0===a?void 0:a.data:void 0),i.action.data.isResult=!0,setTimeout(()=>{eA(i.action)},500),[...t.slice(0,-1),i]):[...t,{...i,action:e.content}]});break;case en.AGENT_RESPONSE:C(t=>[...t,{id:Date.now().toString(),role:"assistant",content:e.content.text,timestamp:Date.now()}]),Y(!0),W(!1);break;case en.UPLOAD_SUCCESS:et(!1);let s=e.content.files.map(e=>e.path);er(e=>[...e,...s]);break;case"error":h.oR.error(e.content.message),et(!1),W(!1)}},eW=(0,n.useMemo)(()=>!!eu&&!ep,[ep,eu]);(0,n.useEffect)(()=>(ec&&!ey&&(()=>{let e=new URLSearchParams({device_id:ec}),t=new WebSocket("".concat(eQ.env.NEXT_PUBLIC_API_URL,"/ws?").concat(e.toString()));t.onopen=()=>{console.log("WebSocket connection established"),t.send(JSON.stringify({type:"workspace_info",content:{}}))},t.onmessage=e=>{try{let t=JSON.parse(e.data);ek({...t,id:Date.now().toString()})}catch(e){console.error("Error parsing WebSocket data:",e)}},t.onerror=e=>{console.log("WebSocket error:",e),h.oR.error("WebSocket connection error")},t.onclose=()=>{console.log("WebSocket connection closed"),L(null)},L(t)})(),()=>{B&&B.close()}),[ec,ey]);let eP=(0,n.useMemo)(()=>[ei.BROWSER_VIEW,ei.BROWSER_CLICK,ei.BROWSER_ENTER_TEXT,ei.BROWSER_PRESS_KEY,ei.BROWSER_GET_SELECT_OPTIONS,ei.BROWSER_SELECT_DROPDOWN_OPTION,ei.BROWSER_SWITCH_TAB,ei.BROWSER_OPEN_NEW_TAB,ei.BROWSER_WAIT,ei.BROWSER_SCROLL_DOWN,ei.BROWSER_SCROLL_UP,ei.BROWSER_NAVIGATION,ei.BROWSER_RESTART].includes(null==z?void 0:z.type),[z]);return(0,n.useEffect)(()=>{var e;null===(e=O.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[null==I?void 0:I.length]),(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-[#191E1B]",children:[(0,a.jsx)(G,{}),!eW&&(0,a.jsx)(x.default,{src:"/logo-only.png",alt:"II-Agent Logo",width:80,height:80,className:"rounded-sm"}),(0,a.jsxs)("div",{className:"flex justify-between w-full ".concat(eW?"p-4":"pt-0 pb-8"),children:[!eW&&(0,a.jsx)("div",{}),(0,a.jsxs)(i.P.h1,{className:"font-semibold text-center ".concat(eW?"flex items-center gap-x-2 text-2xl":"text-4xl"," ").concat(N().className),layout:!0,layoutId:"page-title",children:[eW&&(0,a.jsx)(x.default,{src:"/logo-only.png",alt:"II-Agent Logo",width:40,height:40,className:"rounded-sm"}),"II-Agent"]}),eW?(0,a.jsxs)("div",{className:"flex gap-x-2",children:[(0,a.jsxs)(P,{className:"cursor-pointer h-10",variant:"outline",onClick:()=>{if(!eu)return;let e="".concat(window.location.origin,"/?id=").concat(eu);navigator.clipboard.writeText(e),h.oR.success("Copied to clipboard")},children:[(0,a.jsx)(o.A,{})," Share"]}),(0,a.jsx)(P,{className:"cursor-pointer",onClick:()=>{B&&B.close(),em(null),T.push("/"),C([]),W(!1),Y(!1),Q(!1)},children:(0,a.jsx)(c.A,{className:"size-5"})})]}):(0,a.jsx)("div",{})]}),ep?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center p-8",children:[(0,a.jsx)(d.A,{className:"h-8 w-8 text-white animate-spin mb-4"}),(0,a.jsx)("p",{className:"text-white text-lg",children:"Loading session history..."})]}):(0,a.jsx)(l.o,{children:(0,a.jsx)(r.N,{mode:"wait",children:eW?(0,a.jsxs)(i.P.div,{initial:{opacity:0,y:30,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},transition:{type:"spring",stiffness:300,damping:30,mass:1},className:"w-full grid grid-cols-10 write-report overflow-hidden flex-1 pr-4 pb-4 ",children:[(0,a.jsx)(eq,{messages:I,isLoading:k,isCompleted:X,isStopped:q,workspaceInfo:$,handleClickAction:eA,isUploading:ee,isReplayMode:ey,currentQuestion:K,messagesEndRef:O,setCurrentQuestion:V,handleKeyDown:eI,handleQuestionSubmit:eT,handleFileUpload:eC,isGeneratingPrompt:e_,handleEnhancePrompt:eO,handleCancel:()=>{if(!B||B.readyState!==WebSocket.OPEN){h.oR.error("WebSocket connection is not open.");return}B.send(JSON.stringify({type:"cancel",content:{}})),W(!1),Q(!0)},editingMessage:eb,setEditingMessage:eN,handleEditMessage:e=>{if(!B||B.readyState!==WebSocket.OPEN){h.oR.error("WebSocket connection is not open. Please try again."),W(!1);return}B.send(JSON.stringify({type:"edit_query",content:{text:e,files:null==el?void 0:el.map(e=>".".concat(e))}})),C(t=>{let s=t.findIndex(e=>e.id===(null==eb?void 0:eb.id));if(s>=0){let a=t.slice(0,s+1);return a[s]={...a[s],content:e},a}return t}),Y(!1),Q(!1),W(!0),eN(void 0)}}),(0,a.jsxs)("div",{className:"col-span-6 bg-[#1e1f23] border border-[#3A3B3F] p-4 rounded-2xl",children:[(0,a.jsxs)("div",{className:"pb-4 bg-neutral-850 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex gap-x-4",children:[(0,a.jsxs)(P,{className:"cursor-pointer hover:!bg-black ".concat(D===es.BROWSER?"bg-gradient-skyblue-lavender !text-black":""),variant:"outline",onClick:()=>U(es.BROWSER),children:[(0,a.jsx)(u.A,{className:"size-4"})," Browser"]}),(0,a.jsxs)(P,{className:"cursor-pointer hover:!bg-black ".concat(D===es.CODE?"bg-gradient-skyblue-lavender !text-black":""),variant:"outline",onClick:()=>U(es.CODE),children:[(0,a.jsx)(m.A,{className:"size-4"})," Code"]}),(0,a.jsxs)(P,{className:"cursor-pointer hover:!bg-black ".concat(D===es.TERMINAL?"bg-gradient-skyblue-lavender !text-black":""),variant:"outline",onClick:()=>U(es.TERMINAL),children:[(0,a.jsx)(p.A,{className:"size-4"})," Terminal"]})]}),(0,a.jsxs)(P,{className:"cursor-pointer",variant:"outline",onClick:()=>{let e=eQ.env.NEXT_PUBLIC_VSCODE_URL||"http://127.0.0.1:8080";e+="/?folder=".concat($),window.open(e,"_blank")},children:[(0,a.jsx)(x.default,{src:"/vscode.png",alt:"VS Code",width:20,height:20})," ","Open with VS Code"]})]}),(0,a.jsx)(J,{className:D===es.BROWSER&&((null==z?void 0:z.type)===ei.VISIT||eP)?"":"hidden",url:(null==z?void 0:null===(t=z.data)||void 0===t?void 0:null===(e=t.tool_input)||void 0===e?void 0:e.url)||ev,screenshot:eP?null==z?void 0:z.data.result:void 0,raw:(null==z?void 0:z.type)===ei.VISIT?null==z?void 0:null===(s=z.data)||void 0===s?void 0:s.result:void 0}),(0,a.jsx)(eL,{className:D===es.BROWSER&&(null==z?void 0:z.type)===ei.WEB_SEARCH?"":"hidden",keyword:null==z?void 0:null===(f=z.data.tool_input)||void 0===f?void 0:f.query,search_results:(null==z?void 0:z.type)===ei.WEB_SEARCH&&(null==z?void 0:null===(g=z.data)||void 0===g?void 0:g.result)?(e=>{try{return JSON.parse(e)}catch(e){return null}})(null==z?void 0:null===(E=z.data)||void 0===E?void 0:E.result):void 0}),(0,a.jsx)(eJ,{className:D===es.BROWSER&&(null==z?void 0:z.type)===ei.IMAGE_GENERATE?"":"hidden",url:null==z?void 0:null===(b=z.data.tool_input)||void 0===b?void 0:b.output_filename,image:(e=>{let t=$.split("/").pop();return"".concat(eQ.env.NEXT_PUBLIC_API_URL,"/workspace/").concat(t,"/").concat(e)})(null==z?void 0:null===(w=z.data.tool_input)||void 0===w?void 0:w.output_filename)}),(0,a.jsx)(eo,{currentActionData:z,activeTab:D,className:D===es.CODE?"":"hidden",workspaceInfo:$,activeFile:F,setActiveFile:H,filesContent:eh,isReplayMode:ey}),(0,a.jsx)(e$,{ref:y,className:D===es.TERMINAL?"":"hidden"})]})]},"chat-view"):(0,a.jsx)(eB,{placeholder:"Give II-Agent a task to work on...",value:K,setValue:V,handleKeyDown:eI,handleSubmit:eT,handleFileUpload:eC,isUploading:ee,isDisabled:!B||B.readyState!==WebSocket.OPEN,isGeneratingPrompt:e_,handleEnhancePrompt:eO,toolSettings:eR,setToolSettings:eS,selectedModel:ej,setSelectedModel:ew})})})]})}function e0(){return(0,a.jsx)(n.Suspense,{fallback:(0,a.jsx)(a.Fragment,{}),children:(0,a.jsx)(eZ,{})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[409,330,232,667,528,441,587,358],()=>t(43654)),_N_E=e.O()}]);